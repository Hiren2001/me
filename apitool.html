<!DOCTYPE html>

<html>

<head>

  <title>Weather App</title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">

</head>

<body>

  <div class="container">

    <h1>Weather App</h1>

    <form action="/" method="post">

      <div class="form-group">

        <label for="apiKey">API Key</label>

        <input type="text" class="form-control" id="apiKey" placeholder="Enter your API key">

      </div>

      <div class="form-group">

        <label for="city">City</label>

        <input type="text" class="form-control" id="city" placeholder="Enter city name">

      </div>

      <button type="submit" class="btn btn-primary">Generate Snippet</button>

    </form>

    <div id="snippetCode" class="mt-4"></div>

    <div id="output"></div>

  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

  <script>

    function generateSnippet() {

      // Get the API key and city from the form.

      var apiKey = document.getElementById('apiKey').value;

      var city = document.getElementById('city').value;

      // Create the URL for the weather API.

      var url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}`;

      // Make the request to the weather API.

      $.ajax({

        url: url,

        type: "GET",

        success: function(response) {

          // The request was successful, so parse the response data.

          var weatherData = response.data;

          // Create the HTML for the weather app.

          var html = `

            <h4>Current Weather in ${city}</h4>

            <p>Temperature: ${weatherData.main.temp}Â°C</p>

            <p>Condition: ${weatherData.weather[0].description}</p>

          `;

          // Display the weather app in the page.

          document.getElementById('snippetCode').innerHTML = html;

          // Set the output text.

          document.getElementById('output').innerHTML = weatherData;

        },

        error: function(error) {

          // The request failed, so display an error message.

          document.getElementById('snippetCode').innerHTML = `

            <p>Error: ${error.status}</p>

          `;

        }

      });

    }

    // Click handler for the copy button.

    $('#copyButton').on('click', function() {

      // Get the code from the snippet box.

      var code = document.getElementById('snippetCode').innerHTML;

      // Copy the code to the clipboard.

      var dummy = document.createElement('textarea');

      dummy.textContent = code;

      document.body.appendChild(dummy);

      dummy.select();

      document.execCommand('copy');

      document.body.removeChild(dummy);

      // Display a success message.

      alert('Code copied to clipboard!');

    });

  </script>

</body>

</html>
